{% extends "base.html" %}


{%block photo_grid%}

<ul id="photo_grid">
	{{raw_post}}
		<li class="captioned_photo first">
		<h2>{{campaign.title}}</h2>
		<p>{{campaign.description}}</p>
		</li>
	{%for photo in photos%}
		<li class="captioned_photo"><img src="{{STATIC_URL}}{{photo.captioned_photo}}" /></li>
	{%endfor%}
</ul>
{%endblock%}

{%block upload_form%}
<div id="sticky">
	<aside id="tab" class="rotate-90-ie"><h2>Upload +</h2></aside>
	<div id="upload">
		<article id="step-1">
			<section class="left-section">
				<h2>Use your webcam to take a photo</h2>
				<ol>
					<li>Click &#10004; to allow camera access &rarr;</li>
					<li>Smile for the camera &#9786;</li>
					<li>Click the button &darr;</p>
				</ol>
				<button id="snap-button">Take Photo</button>
				<p>No webcam?  Upload a file!</p>
				<form method="POST" action="upload_raw_photo" enctype="multipart/form-data">
					{{raw_form.as_ul}}
					<input id="uploadDirect" type="submit" value="Go!" />
				</form>
			</section>
			<section class="right-section">
					<div id="camera"></div>
			</section>

		</article>
		
		<article id ="step-2">
			<section class="left-section">
				<form action="/submit" method="POST" enctype="multipart/form-data">
					{% csrf_token %}
					<!-- csrf token ajax for photo, pass to PhotoUpload view -->
					{{ form.non_field_errors }}
					<div class="nophoto">
				    	<div class="fieldWrapper">
				        	{{ form.captioned_photo.errors }}
				        	<label for="id_captioned_photo">Upload a photo</label>
				        	{{ form.captioned_photo}}
				        </div>		
				    </div>	
				    <div id="captioned_photo" class="fieldWrapper">
						{{ form.captioned_photo.errors }}
					</div>
					<div class="fieldWrapper">
						{{ form.name.errors }}
						<label for="id_name">Your Name</label>
						{{ form.name }}
					</div>
				    <div class="fieldWrapper">
				        {{ form.zip_code.errors }}
				        <label for="id_zip_code">Your zip code</label>
				        {{ form.zip_code}}
				    </div>
				    <div class="fieldWrapper">
				        {{ form.email.errors }}
				        <label for="id_email">Your email</label>
				        {{ form.email}}
				    </div>
				   	<div class="fieldWrapper">
						<label for="id_message">Your Message</label>
						{{ form.message }}
					</div>
					<input id="id_raw_photo_url" name="raw_photo_url" type="hidden" />
				    <input id="id_raw_photo_pk" name="raw_photo_pk" type="hidden" />
					<input id="sendForm" type="submit" value="Send" />
					<a href="/privacy/">Privacy Policy</a>
				</form>	
			</section>
			<section class="right-section">
				<canvas id="canvas" width="640" height="480"></canvas>
			</section>
		</article>
	</div>
</div>
{%endblock%}

{%block extra_script%}
{{block.super}}
<script src="{{STATIC_URL}}js/libs/webcam.js"></script>
<script src="{{STATIC_URL}}js/script.js"></script>
<!--[if IE]><script src="{{STATIC_URL}}js/libs/excanvas.compiled.js"></script><![endif]-->
{%endblock%}


